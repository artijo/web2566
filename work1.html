<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Work1: jquery+bootstrap Matching Game</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <style>
        #view2 .col{
            padding: 2px;
        }
        #view2 .col img{
            width: 125px;
        }
    </style>
</head>
<body>
    <h1 class="alert alert-primary text-center">งานที่ 1: เกมขับคู่ภาพ โดยใช้ Jquery และ Bootstrap</h1>
    <div class="text-center p-5" id="view1">
        <button type="button" class="btn btn-primary" id="playBtn">เริ่มเล่นเกม</button>
        <a href="index.html" class="btn btn-success">กลับไปหน้าโปรไฟล์</a>
    </div>
    <div class="container p-5" id="view2">
        <div class="text-center p-5" id="view1">
            <button type="button" id='stopBtn' class="btn btn-danger">เลิกเล่น</button>
        </div>
        <div class="row">
            <div class="col"><img src="work1/img/0.png" alt="img" id="img1"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img2"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img3"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img4"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img5"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img6"></div>
        </div>
        <div class="row">
            <div class="col"><img src="work1/img/0.png" alt="img" id="img7"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img8"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img9"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img10"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img11"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img12"></div>
        </div>
        <div class="row">
            <div class="col"><img src="work1/img/0.png" alt="img" id="img13"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img14"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img15"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img16"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img17"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img18"></div>
        </div>
        <div class="row">
            <div class="col"><img src="work1/img/0.png" alt="img" id="img19"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img20"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img21"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img22"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img23"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img24"></div>
        </div>
        <div class="row">
            <div class="col"><img src="work1/img/0.png" alt="img" id="img25"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img26"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img27"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img28"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img29"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img30"></div>
        </div>
        <div class="row">
            <div class="col"><img src="work1/img/0.png" alt="img" id="img31"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img32"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img33"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img34"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img35"></div>
            <div class="col"><img src="work1/img/0.png" alt="img" id="img36"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <script>
        $(function(){
            $("#view2").hide();
            $("#playBtn").click(startGame);
            $("#stopBtn").click(stopGame);
            $("#view2 img").click(imgClick); 
        });
        function imgClick(){
        var s=$(this).attr("srcx");
        $(this).attr("src", s);
        $(this).attr("state",1);
     }

        function startGame(){
            shuffer();
            open_count=0;
            all_card=36;
            $("#view2").show();
            $("#view1").hide();
        }
        function stopGame(){
            $("#view2").hide();
            $("#view1").show();
        }

        function shuffer(){
        var list=[];
        list[0]=0;
        for (var i = 1; i <= 18; i++) {
          list.push(i);
          list.push(i);
        }
    //    console.log(list);
        for(var i=1;i<100;i++){
          var a=1+Math.round(Math.random()*35);
          var b=1+Math.round(Math.random()*35);
          var t=list[a];
          list[a]=list[b];
          list[b]=t;
        }
        $("#view2 img").attr("src","work1/img/0.png")
                       .attr("state",0);
        for (var i = 1; i <= 36; i++) {
           $("#img"+i).attr("srcx","work1/img/"+list[i]+".png");
        }
      }

      var open_count=0;
      var open_card1=0;
      var open_card2=0;
      var all_card=36;


      function imgClick(){
       //console.log(this);
        //console.log(this);
        if($(this).attr("state")!=0) return;
        if(open_count>=2) return;


        open_count++;
        var s=$(this).attr("srcx");
        if(open_count==1)open_card1=s;
        if(open_count==2)open_card2=s;
        $(this).hide().attr("src", s).slideDown(500);
        $(this).attr("state",1);
        if(open_count==2){
           setTimeout(()=>{
            if(open_card1==open_card2){
            all_card-=2;
            $("[state=1]").fadeOut(1000).attr("state",2);
          }else{
            $("[state=1]").attr("state",0).attr("src","work1/img/0.png");
          }
          open_count=0;
          open_card2="";
          open_card1="";

           },2000)          
        }
    }
    </script>
</body>
</html>